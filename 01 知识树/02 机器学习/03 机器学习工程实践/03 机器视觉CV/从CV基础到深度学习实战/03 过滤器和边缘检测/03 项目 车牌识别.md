# 车牌识别


下面我们开始讲今天的项目：

做 OCR 相关的，一些细节还是要自己去看一下的，这里只是大概讲一下：

车牌识别，主要是车牌的定位，和文字的识别。尤其是在光线很暗的情况下，老师提到了一个下雨的时候怎么把雨水的影响去除掉。

在实际工业中应用的时候，很多的理论上看起来比较简单的算法在实际中有很重要的作用。

下面介绍一下车牌识别的流程和技术方法：

比如某个环节要使用那些技术。

车牌识别是一个老话题，也叫做 自动车牌识别 ANPR。

- 图像分割
- 特征提取
- 模式识别
    - Support vector machine
    - Artificial neural network



车牌识别有两个步骤：

1. 车牌的检测
2. 车牌的识别


车牌的检测就是获得车牌在图像中的位置。涉及到：

- 图像的分割
- 特征的提取

我们一副图像可能拿到多个车牌的位置，然后交给我们的识别方法进行验证。

下面这个图是主要的算法的步骤：


![mark](http://pacdb2bfr.bkt.clouddn.com/blog/image/180808/FcAjGh8ACI.png?imageslim)


图像分割：会从一副图像中获得感兴趣的块，
比如一个 200*200 的图像，我们车牌的大小是 20*10 ，如果是枚举，那么计算量非常大，所以，我们要进行一个 proposal 的过程，后面我们讲 cnn 的时候也会做这样的操作。

特征提取，是对字符图像的每一个部分进行提取，

### 我们看一下车牌的检测与定位

![mark](http://pacdb2bfr.bkt.clouddn.com/blog/image/180808/H00jJma30L.png?imageslim)

从一个最原始的图像到一个车牌。

这个步骤分为两部分：

- 图像分割
- 对分割图像进行分类

今天我们主要讲检测与定位，对后面的字符识别，后面讲 NN 的时候会讲到。

首先，我们拿到原图像进行灰度转换，从 RGB 到 RGBIR 到灰度。这个地方之所以要转，是因为颜色信息用不到，后面可能会用到车牌底色是蓝色还是白色还是黄色。<span style="color:red;">什么时候会用到车牌的颜色？</span>

注：在车牌检测的时候，很多时候是拿到的红外图像，因为我们车牌上面的材料不同，因此很多时候拿到的都是由 IR 的。<span style="color:red;">IR 是什么？红外图像与普通的图像有区别吗？</span>

转成灰度之后，才正式开始，这个灰度图像就是我们的输入，我们第一步要做得就是图像滤波，我们使用高斯滤波来去燥，这是我们必须要做的。

然后开始找边缘，车牌定位的时候，我们主要找的竖直边缘，第一张图就是用的 sobel 滤波器找的竖直边缘，为什么要找竖直，因为这个与任务有关

得到粗边缘之后，进行阈值化，阈值化的方法有自适应的、DTSU 大金算法 等，这都是很常用的。

在拿到了一个有很多噪点的边缘图像之后，我们接下来常做的就是形态学，这里面用的是闭操作，删除竖直边缘之间的空白区域，把该联通的区域联通，这样我们就把一些小的不连续的边缘去掉了，见第一行的第三张图。这样就得到了一些可能的区域，包括车牌的位置，也包括一些不是车牌的位置。<span style="color:red;">形态学是什么？一般什么情况下使用？</span>

下面我们可以用矩形框来逼近连通区域的形状。在这一步之前，我们先做了一个模板，比如说，当把背景图像用漫水填充，相当于把背景去掉。这样，我们用矩形拟合的数量就会少一些。<span style="color:red;">怎么做漫水填充的？怎么知道什么是背景的？怎么用矩形拟合的？</span>

从第二行第二幅图上，可以看到，有很多的红色的矩形框，我们会在原图像上拿到若干个可能的车牌的位置，由于我们找的是车牌，因此长宽比是固定的，因此很多直接就去除掉，

我们拿到了可能的车牌的位置，把这个位置进行缩放，或者说仿射变换，因为这是一个摄像机从高处拍的照片，因此会有一个仿射的存在，因此这个车牌的图像是扭曲的，我们需要把它转换成一个标准的矩形，因此，我们把所有的可能的区域转化成一个固定大小的区域图像，这样就从原图像得到了若干个大小相同的一些可能的车牌区域。

做到这一步，得到了很多的大小相同的可能的车牌图像，就已经完成了图像的分割。


接下来，我们讲一下车牌检测中的分类操作：

![mark](http://pacdb2bfr.bkt.clouddn.com/blog/image/180808/c06Gm29mml.png?imageslim)



在分类中，我们要对之前取到的一些矩形进行分类，来决定他是否是车牌。这里面我们用到的就是 SVM 的分类方法。老师说 SVM 是最好的分类方法，没有之一。<span style="color:red;">嗯，之前不知道 SVM 名气这么大。</span>
