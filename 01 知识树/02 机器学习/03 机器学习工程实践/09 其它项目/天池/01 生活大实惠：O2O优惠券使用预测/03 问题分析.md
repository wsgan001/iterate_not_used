# **数据与评价方式**

赛题提供用户在2016年1月1日至2016年6月30日之间真实线上线下消费行为，预测用户在2016年7月领取优惠券后15天以内的使用情况。 使用优惠券核销预测的平均AUC（ROC曲线下面积）作为评价标准。 即对每个优惠券 coupon_id 单独计算核销预测的 AUC 值，再对所有优惠券的 AUC 值求平均作为最终的评价标准。<span style="color:red;">怎么求单独的AUC和平均的AUC？</span>

当测试集中的正负样本的分布变化的时候，ROC曲线能够保持不变。因为在实际的数据集中经常会出现类不平衡，所以次点也是AUC指标的优势。<span style="color:red;">什么是次点？</span>

------

# **解决方案**

提供数据的区间是2016-01-01~2016-06-30，预测七月份用户领券使用情况，即用或者不用，转化为**二分类问题**，然后通过分类算法预测结果。

首先就是特征工程，其中涉及对数据集合的划分，包括提取特征的区间和训练数据区间。
接着就是从特征区间中提取特征，包括用户特征、商户特征、优惠券特征、用户商户组合特征、用户优惠券组合特征。

后期在测试区间提取了当天的前后7/3/1天的领券信息（这里面后七天的特征其实是不能应用于工业应用的，因为实际预测中你无法知道后7/3/1天的领券信息），提升较大。最后使用GBDT、RandomForest、LR进行基于 rank 的分类模型融合。<span style="color:red;">什么叫基于rank 的分类模型融合？</span>




# **数据划分**

最初没有使用数据划分，导致特征中产生数据泄露，以至于在训练数据上效果很好，线下测试也还不错，在线上表现确差强人意，后来划分了之后有明显提升。

| 集合   | 预测区间                                      | 特征区间                                      |
| ------ | --------------------------------------------- | --------------------------------------------- |
| 预测集 | 领券:20160701~20160731                        | 领券 & 消费:20160101~20160630                   |
| 训练集 | 领券:20160515~20160615 消费:20160515~20160630 | 领券:20160101~20160501 消费:20160101~20160515 |

可以划分多个训练集。
