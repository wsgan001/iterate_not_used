特征工程

主要有五大特征类：

- 用户特征、商户特征、优惠券特征、用户商户组合特征、用户优惠券组合特征，赛题包括online和offline的数据，由于里面只有部分用户重合，商户优惠券等并未有重合，个人臆测线上应该是淘宝天猫的购买消费数据，有一定关联，但关系微弱，因此只向其中提取了用户特征。而offline数据集就提取了所有五个特征类。一下是各部分特征：



赛题提供了 online 和 offline 两份数据集，online 数据集可以提取到与用户相关的特征，offline 数据集可以提取到更加丰富的特征：用户相关的特征，商家相关的特征，优惠劵相关的特征，用户-商家交互特征。

另外需要指出的是，赛题提供的预测集中，包含了同一个用户在整个7月份里的优惠券领取情况，这实际上是一种leakage，比如存在这种情况：某一个用户在7月10日领取了某优惠券，然后在7月12日和7月15日又领取了相同的优惠券，那么7月10日领取的优惠券被核销的可能性就很大了。我们在做特征工程时也注意到了这一点，提取了一些相关的特征。加入这部分特征后，AUC提升了10个百分点，相信大多数队伍都利用了这一leakage，但这些特征在实际业务中是无法获取到的。<span style="color:red;">厉害了。特征工程对于特征的发现，有些是数据信息外的，这些挖掘有什么方面和指导吗？比如说要与生活常理相结合，与人类行为相结合。</span>

以下简要地说明各部分特征：

<span style="color:red;">这些特征都是怎么得到的？想出来的？而且怎么确定这些特征是有用的？怎么从数据中提取这些特征？非常想知道，靠简单的python 数据操作吗？大批量数据怎么办？比如说几个 G 的csv 文件，无法装载到内存怎么办？</span>

- **用户线下相关的特征**

  - 用户领取优惠券次数
  - 用户获得优惠券但没有消费的次数
  - 用户获得优惠券并核销次数
  - 用户领取优惠券后进行核销率
  - 用户满0~~50/50~~200/200~500 减的优惠券核销率
  - 用户核销满0~~50/50~~200/200~500减的优惠券占所有核销优惠券的比重
  - 用户核销优惠券的平均/最低/最高消费折率
  - 用户核销过优惠券的不同商家数量，及其占所有不同商家的比重
  - 用户核销过的不同优惠券数量，及其占所有不同优惠券的比重
  - 用户平均核销每个商家多少张优惠券
  - 用户核销优惠券中的平均/最大/最小用户-商家距离

- **用户线上相关的特征**

  - 用户线上操作次数
  - 用户线上点击率
  - 用户线上购买率
  - 用户线上领取率
  - 用户线上不消费次数
  - 用户线上优惠券核销次数
  - 用户线上优惠券核销率
  - 用户线下不消费次数占线上线下总的不消费次数的比重
  - 用户线下的优惠券核销次数占线上线下总的优惠券核销次数的比重
  - 用户线下领取的记录数量占总的记录数量的比重

- **商家相关的特征**

  - 商家优惠券被领取次数
  - 商家优惠券被领取后不核销次数
  - 商家优惠券被领取后核销次数
  - 商家优惠券被领取后核销率
  - 商家优惠券核销的平均/最小/最大消费折率
  - 核销商家优惠券的不同用户数量，及其占领取不同的用户比重
  - 商家优惠券平均每个用户核销多少张
  - 商家被核销过的不同优惠券数量
  - 商家被核销过的不同优惠券数量占所有领取过的不同优惠券数量的比重
  - 商家平均每种优惠券核销多少张
  - 商家被核销优惠券的平均时间率
  - 商家被核销优惠券中的平均/最小/最大用户-商家距离

- **用户-商家交互特征**

  - 用户领取商家的优惠券次数
  - 用户领取商家的优惠券后不核销次数
  - 用户领取商家的优惠券后核销次数
  - 用户领取商家的优惠券后核销率
  - 用户对每个商家的不核销次数占用户总的不核销次数的比重
  - 用户对每个商家的优惠券核销次数占用户总的核销次数的比重
  - 用户对每个商家的不核销次数占商家总的不核销次数的比重
  - 用户对每个商家的优惠券核销次数占商家总的核销次数的比重

- **优惠券相关的特征**

  - 优惠券类型(直接优惠为0, 满减为1)
  - 优惠券折率
  - 满减优惠券的最低消费
  - 历史出现次数
  - 历史核销次数
  - 历史核销率
  - 历史核销时间率
  - 领取优惠券是一周的第几天
  - 领取优惠券是一月的第几天
  - 历史上用户领取该优惠券次数
  - 历史上用户消费该优惠券次数
  - 历史上用户对该优惠券的核销率

- **其它特征**

  这部分特征利用了赛题leakage，都是在预测区间提取的。

  - 用户领取的所有优惠券数目
  - 用户领取的特定优惠券数目
  - 用户此次之后/前领取的所有优惠券数目
  - 用户此次之后/前领取的特定优惠券数目
  - 用户上/下一次领取的时间间隔
  - 用户领取特定商家的优惠券数目
  - 用户领取的不同商家数目
  - 用户当天领取的优惠券数目
  - 用户当天领取的特定优惠券数目
  - 用户领取的所有优惠券种类数目
  - 商家被领取的优惠券数目
  - 商家被领取的特定优惠券数目
  - 商家被多少不同用户领取的数目
  - 商家发行的所有优惠券种类数目
