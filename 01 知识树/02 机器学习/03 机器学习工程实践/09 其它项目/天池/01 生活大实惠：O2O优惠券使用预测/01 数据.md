- 文件名称 (报名后可下载)文件格式

ccf_data_revised.zip (49MB)
sample_submission.csv (364B)

## **数据**

​    本赛题提供用户在2016年1月1日至2016年6月30日之间真实线上线下消费行为，预测用户在2016年7月领取优惠券后15天以内的使用情况。

注意： 为了保护用户和商家的隐私，所有数据均作匿名处理，同时采用了有偏采样和必要过滤。

## **评价方式**

​    本赛题目标是预测投放的优惠券是否核销。针对此任务及一些相关背景知识，使用优惠券核销预测的平均AUC（ROC曲线下面积）作为评价标准。 即对每个优惠券coupon_id单独计算核销预测的AUC值，再对所有优惠券的AUC值求平均作为最终的评价标准。 关于AUC的含义与具体计算方法，可参考[维基百科](https://zh.wikipedia.org/wiki/ROC%E6%9B%B2%E7%BA%BF#.E6.9B.B2.E7.B7.9A.E4.B8.8B.E9.9D.A2.E7.A9.8D.EF.BC.88AUC.EF.BC.89)


## **字段表**

Table 1: 用户线下消费和优惠券领取行为 表名 train_offline_stage2

| **Field**     | **Description**                                              |
| ------------- | ------------------------------------------------------------ |
| User_id       | 用户ID                                                       |
| Merchant_id   | 商户ID                                                       |
| Coupon_id     | 优惠券ID：null 表示无优惠券消费，此时Discount_rate和Date_received字段无意义 |
| Discount_rate | 优惠率：x \in [0,1]代表折扣率；x:y 表示满 x 减 y。单位是元       |
| Distance      | user 经常活动的地点离该 merchant 的最近门店距离是 x*500 米（如果是连锁店，则取最近的一家门店），x\in[0,10]；null 表示无此信息，0 表示低于 500 米，10 表示大于 5 公里； |
| Date_received | 领取优惠券日期                                               |
| Date          | 消费日期：如果Date=null & Coupon_id != null，该记录表示领取优惠券但没有使用，即负样本；如果Date!=null & Coupon_id = null，则表示普通消费日期；如果Date!=null & Coupon_id != null，则表示用优惠券消费日期，即正样本； |





Table 2: 用户线上点击/消费和优惠券领取行为 表名 train_online_stage2

| **Field**     | **Description**                                              |
| ------------- | ------------------------------------------------------------ |
| User_id       | 用户ID                                                       |
| Merchant_id   | 商户ID                                                       |
| Action        | 0 点击， 1购买，2领取优惠券                                  |
| Coupon_id     | 优惠券ID：null表示无优惠券消费，此时Discount_rate和Date_received字段无意义。“fixed”表示该交易是限时低价活动。 |
| Discount_rate | 优惠率：x \in [0,1]代表折扣率；x:y表示满x减y；“fixed”表示低价限时优惠； |
| Date_received | 领取优惠券日期                                               |
| Date          | 消费日期：如果Date=null & Coupon_id != null，该记录表示领取优惠券但没有使用；如果Date!=null & Coupon_id = null，则表示普通消费日期；如果Date!=null & Coupon_id != null，则表示用优惠券消费日期； |



Table 3：用户O2O线下优惠券使用预测样本 表名 prediction_stage2

| **Field**     | **Description**                                              |
| ------------- | ------------------------------------------------------------ |
| User_id       | 用户ID                                                       |
| Merchant_id   | 商户ID                                                       |
| Coupon_id     | 优惠券ID                                                     |
| Discount_rate | 优惠率：x \in [0,1]代表折扣率；x:y表示满x减y.                |
| Distance      | user经常活动的地点离该merchant的最近门店距离是x*500米（如果是连锁店，则取最近的一家门店），x\in[0,10]；null表示无此信息，0表示低于500米，10表示大于5公里； |
| Date_received | 领取优惠券日期                                               |



Table 4：选手提交表名要求统一命名为：o2o_result 字段要求如下表
其中user_id,coupon_id和date_received均来自Table 3,而Probability为预测值



| **Field**     | **Description**                |
| ------------- | ------------------------------ |
| User_id       | 用户ID                         |
| Coupon_id     | 优惠券ID                       |
| Date_received | 领取优惠券日期                 |
| Probability   | 15天内用券概率，由参赛选手给出 |

**注意事项**

1、选手在数加平台上读取数据源表时，需在表名前加前 `odps_tc_257100_f673506e024` ，例如：`select count(*) from odps_tc_257100_f673506e024.train_offline_stage2`、

2、提交的结果均应该由其提交的算法模型产出，请勿使用其它途径产生结果，否则将视成绩无效；

3、比赛数据禁止导出、恶意爬取，否则将取消比赛资格。
