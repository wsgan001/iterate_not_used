
安装 CentOS

完成之前的知识积累和软件下载后，就可以开始安装CentOS 了。读者可能会遇到不同的 环境，因此本节将模拟不同的环境，使用不同的方法安装CentOS。

2.2.1创建虚拟机

在虚拟中单击菜单栏中的“文件”，在弹出的菜单中选择“新建虚拟机”，之后将弹出新建 虚拟机向导，如图2.3所示。

图2.3新建虚拟机向导



首先需要选择采用什么类型新建虚拟机，如果使用自定义，向导将会要求用户选择虚拟机 的兼容版本，SCSI控制器类型等，此处选择“典型”，然后单击“下一步”。接下来向导会要 求用户选择安装来源，如图2.4所示。

通常不建议大家在此处选择安装光盘，此处建议选中“稍后安装操作系统”，并单击“下 一步”。接下来向导会提示用户选择操作系统类型，如图2.5所示。

图2.4选择安装来源



图2.5选择操作系统类型



此处选择“客户机操作系统"为“Linux”，然后在“版本”列表中选择“CentOS 64位” （截至本书编写时CentOS 7还没有发布32位版，因此此处选择64位版），然后单击“下一步”。 接下来向导会提示用户命名虚拟机，如图2.6所示。

在虚拟机名称中输入虚拟机名，然后单击位置后面的“浏览”按钮，选择虚拟机文件保存 的目录，最后单击“下一步”进入指定磁盘容量页面，如图2.7所示。

图2.6命名虚拟机



图2.7指定磁盘容量



如果仅需要安装基本版的CentOS 7,磁盘空间10GB已经足够使用了；如果要存放其他 文件则按文件大小调整硬盘空间大小。之后将选择虚拟磁盘存储为单个文件还是多个文件，这 是由存放虚拟机文件的分区类型决定的。如果文件类型为FAT32,必须选择存储为多个文件， 这是因为FAT32不支持4GB以上的单个文件。用户可以在对应的盘符上单击右键选择“属性”， 在弹出的常规页面中查看文件系统类型。选择好磁盘选项后，单击“下一步”就会弹出完成创 建页面，如图2.8所示。

|                       |              |              |      | 翩   |
| --------------------- | ------------ | ------------ | ---- | ---- |
| 已：（《好«蠹遢拟机   |              |              |      |      |
| 单击”完成"创蠭由｝«机 | 然后司以安装 | CantOS 64 位 |      |      |

»使用■FWSHmSK 机:

| 名称：       | CentOS 7                        |      |
| ------------ | ------------------------------- | ---- |
| 位S:         | E:\Virtual Machines\CentOS 7    |      |
| 版本：       | Workstation 10.0                | j    |
| 播作系统：   | CentOS 64 fe                    |      |
| 硬盘：       | 20 GB                           |      |
| 内存：       | 1024 MB                         |      |
| 网络适织器： | MAT                             | i    |
| 其他设蓊：   | OJ/DVO, USS控剌器，打印机，声卡 |      |

_

图2.8完成创建页面

在完成创建页面中，可以单击“自定义硬件”按钮弹出修改虚拟机的硬件设备页面。在自 定义硬件设备页面中，需要检查内存容量应该大于512MB,否则CentOS将无法启动安装程序; 如果要使用U盘、移动硬盘等设备，硬件中必须包含USB控制器；安装时需要使用光盘，因 此CD/DVD设备也必不可少。确认以上信息之后就可以单击“完成”按钮，完成虚拟机创建。

2.2.2光盘安装CentOS 7

Linux的安装方法有很多种，本小节主要以光盘安装为例介绍Linux的安装过程及相关的 参数设置。详细步骤如下：

步孅



打开创建的虚拟机，单击“编辑座拟机设置”，或在主窗体右侧库中找到新建的虚拟机 右键单击，并在弹出的菜单中选择“设置”，调出虚拟机设置窗口，如图2.9所示。

图2.9虚拟机设置窗口



在虚拟机设置窗口中单击硬件选项中的“CD/DVD (IDE)”，然后在右侧选择“使用物理 驱动器”(即使用宿主机的光驱)或“使用ISO映像文件”。读者可根据实际情况进行选择， 此例中选择“使用ISO映像文件”并单击浏览选择下载的光盘文件，完成后单击“确定”保 存设置即可。

通过以上步骤完成虚拟机的参数设置，下一步是启动虚拟机，单击“开启虚拟机” 选项或单击其中的绿色箭头即可启动虚拟机，如图2.10所示。

a殲我的培脑

徽BT    翁

趣 LFS6.3 趨 CentOS 織 OraclelOg 趣 CentOS?



&颖?

Lp Cen

*幵自过 hf’織藎



图2.10启动虚拟机

€03'启动后耐心等待安装程序引导完毕，即进入Linux的安装界面。Linux的安装和 Windows的安装类似，如图2.11所示。

Cmvtns： 7

Insh-i 11 CentOS ?

Test this nedia & install CentOS 7

TroJi h 1 esiioot iny

Automatic boot in 59 seconds…

图2.11 Linux引导选择画面

画面中给出 了三个选项，“Install CentOS 7”、“Test this media & install CentOS 7” 和 “Troubleshooting”。第一个选项表示直接安装CentOS7,第二个选项表示先测试光盘有无错误 然后再安装，第三个选项主要用来测试内存和启动救援模式修复已存在的CentOS。此示例中 选择第一项，直接安装CentOS 7，如果对安装光盘表示怀疑也可选择第二项。

选中第一项“Install CentOS 7”并按Enter键，等待数秒后会提示用户按Enter键启动安装 程序，此时可以按Enter键或等待数秒待系统自动启动安装程序。

^4 安装程序启动后，首先会提示用户在安装过程中使用的语言，如图2.12所示。

![img](11 CentOS7系统管理与运维实战_files/11 CentOS7fbdfa1060ed0f49e18-15.jpg)



CentOS



CENTOS 7 INSTALLATION

頤u«

WELCOME TO CENTOS 7.

What language would you tike to use during the installation process?

| English           | £n<^ish    |
| ----------------- | ---------- |
| Afrikaans         | Afrikaans  |
|                   | AmtMrk     |
|                   | Arabic     |
|                   | Assamese   |
| Asturianu         | Asturian   |
| Ee/iapycKas       | Belarusian |
| BwirapcKM         | Bulgarian  |
|                   | Bengali    |
| ftfps    Ur srmft |            |



English' States)



J: English (United Kingdom)    ；

；'English (India)

\ English (Australia)

/；: English (Canada)

: English (Denmark)

+::p English (Ireland)

\ \ English (New Zealand) p English (Niger⑷

' English (Hong Kong SAR China) *;



Quit ； Continue

图2.12安装程序询问安装过程中使用的语言

此处可以保持默认，也可以在左侧选项中选择“中文”，右侧中选择“简体中文(中国)”。 需要注意的是此处选择的语言仅为安装过程中使用的语言，并不影响系统的最终语言。本例中 左侧选择“中文”，右侧选择“简体中文(中国)”，单击Continue完成设置。

接下来安装程序将显示安装信息摘要界面，如图2.13所示。

安装催雇摘嬰



![img](11 CentOS7系统管理与运维实战_files/11 CentOS7fbdfa1060ed0f49e18-16.jpg)



CENTOS 7 安装

因cn

C€ntOS



本地化



曰期和时间(T)

亚洲/上海崛

进苗支持(L)

简体中文(中鼴}



软件



安装灘⑴

本地介质



软件选择(S)

截小安装



系统



SS



o3



网格和主机名＜N)

未连接

退邮)

•.細細w '俊微獅紳殘舰糊to.



紐眶脉細綱岍下-*‘



體:戀戮



图2.13安装信息摘要界面

安装程序将需要用户设置的信息分为三个部分：本地化、软件和系统，完成这些设置后方 可继续安装。

^)6



如图2.13所示，在本地化中系统已经按之前设置的语言预设了时区、键盘类型和语 言支持三个选项，如需要修改直接鼠标单击对应的图标即可。首先日期和时间中的 时区已经被设置为“亚洲/上海”，单击“日期和时间”弹出日期和时间设置窗口，

如图2.14所示。

| 曰期&时间   |              |      | CENTOS 7 安装 |
| ----------- | ------------ | ---- | ------------- |
|             |              |      |               |
| 堆K(R):亚洲 | *城市(q:上脣 | -q   | 网關測.闭炎   |

图2.14日期和时间设置窗口

在日期和时间设置窗口中，可以在地区和城市中选择需要使用的时区，也可以在下方地图 中单击对应的区域来设置时区。网络时间设置是用来设置是否让操作系统自动从时间服务器同 步时间，设置此项需要在系统设置中先设置网络。如果已经设置网络，可以拖动网络时间后面 的滑块至开启位置即可，而如需对时间服务器进行设置，可以单击滑块右侧的齿轮按钮添加或 删除时间服务器。

在窗口的下方可以设置当前日期和时间及时间显示的制式等，读者按需要进行设置即可， 完成设置后单击左上方的“完成”按钮返回安装信息摘要界面。

本地化中的键盘选项已被设置为“汉语”，而语言支持选项中也已自动选择添加简体中文 支持，通常都无须在做设置。

![img](11 CentOS7系统管理与运维实战_files/11 CentOS7fbdfa1060ed0f49e18-20.jpg)



若选择英语作为系统的默认语言，也应该在语言支持中选择安装简体中文相关的软件包， 否则某些中文命名的文件可能无法正常显示。

安装信息摘要界面中的软件部分，主要是用来定制需要安装的软件包及软件包的来 源。其中安装源表示安装时软件包的来源，此时安装程序已自动将来源设置为本地 介质即光盘，无须修改。软件选择选项表示安装操作系统时需要一并安装的软件， 默认设置为最小安装即只安装系统最基本的组件，单击软件选择进入软件定制界

面，如图2.15所示。

软件选择



![img](11 CentOS7系统管理与运维实战_files/11 CentOS7fbdfa1060ed0f49e18-21.jpg)



CENTOS 7 安萩



驀本环壤



e繼小安鎪 軀本功i



sats饞■髡H

用子播格s舞的《«a.

文停及打印■傳B

用子企*的文汽.rrui及存《臞舞a.

基本nns务b

癦供财态及••力态豆联网内番的塵《H.

慮«化主机

鳗小虚拟比主机，

播GUI的曲»B

带W用子嫌托网扭暮硪说施脚典GUI的》勞器，

GNOME A面

GNOME S —个衮篥廬题S用户友好的累SP?境.

KDE Ptasma Workspaces

KDE Ptacma Workspaces是一个邋連可C邐田形用戸 矜s.霣中e话s*橐s s«ffi标以a麋翯向写« «多功sa大的KDE s用程序，

开发及生成工作K

用子《w. Jilt. »形s«内容幵发的工作玷.



已选环遭的附加选顶

雇容性糧序庫

用子圧«囑企®曲Lmw的之《«事中拘BWS用程序幻

开沒I*

基車孖发坏廣，

■軀+支》♦

支待使用B能千»证，



图2.15软件定制界面

软件定制界面左侧是系统预定义的基本环境，按用途不同可以分为基础设施服务器、文件 及打印服务器、基本网页服务器和虚拟化主机等。右侧则为每个基本环境中附加软件选项，此 处可以根据自身需求选择基本环境，需要注意的是某些基本环境默认没有安装图形界面，对于 初学者此处可选择“GNOME桌面”。选择完成后单击左上角的“完成”按钮返回安装信息摘 要界面，返回后安装程序将重新计算软件依赖关系，此过程中软件部分的选项将显示为灰色。

步霽



系统部分要求用户设置硬盘分区方案和网络连接，此时安装程序已自动将硬盘分区 方案设置为自动分区，但要求用户确认，如图2.13所示。单击“安装位置”进入“安 装目标位置”选择界面，如图2.16所示。

| 安装目标位置                                               | 、    CENTOS 7 安弒              |
| ---------------------------------------------------------- | -------------------------------- |
| 设备遘揮逯择您想»安8的设番，在您点击“幵始安装"本壜番惠磁耋 | 按招之的.选择的设番并不会破襍作- |
| 10.24 G8                                                   |                                  |
| -CVMware, VMware Virtual Ssda t 10.24 GB 空闲              |                                  |
| KM的及nttMtt                                               | 此处禾选撵的磁曲獬不会镶操作,    |
| 添加碾番(A)...                                             |                                  |
| 篥它存備遘項分区O自功C置分区＜Uh    我褰M分区＜IL          | ttfi來連掃的f8番格不会9進作,     |

我想让《外空间5J用(M),

加窗

充S磁盘摘》以及引锌找序(FL.



已®» 1个磁fih料癱W24GB; 10Z4GB空闲

图2.16    “安装目标位置”界面

在安装目标位置界面中，首先需要用户确认安装的磁盘，此处已选择了一个本地磁盘sda， 容量为10.24GB,空闲空间为10.24GB。本地标准磁盘下面是存储添加区域，如果需要使用额 外的存储，可以在设置网络之后单击“添加硬盘”选项添加额外的存储。最后的“其他存储选 项”中，可以选择手动分区和系统是否加密（通常不选择加密选项）。选择“我要配置分区”, 然后单击左上角的“完成”按钮进入分区界面，如图2.17所示。

手幼分区

，斷CentOS 7安襞

«迁没有为CentOS，的安利创建任词技ffi可

:tt：

:-妞盟鱼楚堡遽上.

•遇过点击*****按扭剖礁顧珪 •或奮向下方速鐸的巳列分区分e析栓n点.

CENTOS 7 安装



在您为CentOS 7安装创钂技W讲后.怒可在这鬣浏览它们的谇纗《



全部里设



BJ用空1»1

10.23 GB

S5»l

10.24 GB



图2.17手动分区界面

在"手动分区”界面中可以看到，这是一个新的CentOS 7安装，分区方案可以有多种选 择，本例中将选择标准分区。然后单击下方的“+”添加分区，此时将弹出添加分区窗口，如 图2.18所示。

添加新挂n点

在下方创建挂載点后 有更多自定义选项可用.

«載点（P）:「

期B番量（⑺：

取，削 G 3iSSif«）a（A）

图2.18分区窗口

添加分区窗口主要有两项需要用户设置，第一项为挂载点即系统目录，第二项为期望容量， 此处填入分区大小，默认单位为MB,但也可以使用如2GB、100MB等形式。本例将使用最 基本的分区方案，依次添加挂载点为“/boot”的引导分区，空间大小为500MB,挂载点为“swap” 的交换分区，大小为2GB，挂载点为根分区的“/”，期望容量不填（不填将默认使用剩余所有 空间）。分区完成后将显示分区方案，如图2.19所示

| 手幼分区 | CENTOS |
| -------- | ------ |
| 猶商     |        |

卜:



M■番麄＜0):    7 739GB

设曇供am:殍詹分区

加細



文停系鏞作)xfs

its!    •上的"开助―檫祖之K” .

雄在車霱華内所做的更改不会9S用.

!L+_

969.23 kD I 10 24 GO

已蠹g i ff a设bis>

图2.19分区方案



在分区方案的右侧，还可以对分区进行一些调整，此处最主要的调整是调整文件系统类型。 在本例中保持默认，单击左上角的“完成”按钮，将提示是否需要将分区方案保存到硬盘，单 击“接受更改”即可保存并返回安装信息摘要界面。

CS9 完成分区方案设置之后，接下来需要设置网络和主机名，单击“网络和主机名”弹 出设置窗口，如图2.20所示。

| 网铒和主机€ | CENTQS 7 安« |
| ----------- | ------------ |
|             |              |

d etnernst (eno 16?7?7365

!nr*i C«w^M«|'(< ■PiiWi (WO    l»ort A^«ai«« .；

Ethernet (enol6777736) 已《歼3播

键件堆祉 O&OC.2958 58 i$a iooor*iw«

子网 niw 127.0.0,1

CW;

图2.20网络和主机名设置

从界面左侧可以看到，安装程序发现了一张网卡命名为enol6777736,并且网卡默认处于 关闭状态。在界面左下侧安装程序已经设置了一个主机名，用户可以在此处输入新的主机名。

拖动界面右侧的滑块将网卡启用，如果使用的网络还需要设置IP地址等信息，可以单击 “配置”按钮，在弹出的窗口中选中“IPv4设置”，如图2.21所示。

图2.21网卡设置



可以看到系统默认使用DHCP的方式来获得IP地址等信息，如需设置IP地址可以在方法 中选择“手动”，然后在地址中添加相应的IP地址、子网掩码和网关。DNS服务器地址应该 填写在“附加DNS服务器”选项中，如果有多个DNS地址则使用逗号作分隔。如果虚拟机 的网络设置为Host-Only和NAT,此处应该设置为通过DHCP方式获得IP地址等信息。

完成上述设置后，单击“保存”按钮返回网络和主机名设置界面，再单击左上角的“完成” 按钮返回安装信息摘要界面。

gTTio 完成前面几步的设置之后，请再次确认每一项设置是否合适，特别是磁盘分区，因 为到此时为止安装程序还没有修改磁盘中的数据。确认没有问题之后，单击右下角 的“开始安装”，安装程序会使用之前的设置开始系统的安装工作，如图2.22所示。

配靈



![img](11 CentOS7系统管理与运维实战_files/11 CentOS7fbdfa1060ed0f49e18-26.jpg)



CENTOS 7 安装

困《



C€ntOS



用户设置



ROOTftB

Root密码未设邇



«醒用户（u>

不会铟鏞任钶用户



惠动軟件E安解进W

?ntO5 Core 5IG

iduccsthe CentOS Linux OistnbuKon.

■    i…    '

![img](11 CentOS7系统管理与运维实战_files/11 CentOS7fbdfa1060ed0f49e18-27.jpg)



必價先JW灌戰此囲样杨记的内8W8行T-伊，



图2.22开始安装

从图2.22中可以看到安装程序已经开始安装工作，但还需要对用户进行设置。其中“ROOT 密码”选项将设置root用户的密码，root用户通常也称为根用户，在Linux系统中拥有至高无

上的权限（相当于Windows系统中的Administrator用户），因此如果在生产环境中，应当设置 一个强度较高的密码。

由于root用户的权限太大，若用户登录并使用根用户误操作可能会带来一些不必要的麻 烦，例如输错一个字母删除系统中重要的数据等。因此系统强制要求创建一个普通用户，并使 用普通用户登录系统，必要时向root用户“申请”权利。

单击“创建用户”选项即可弹出创建用户窗口，填入全名、用户名、密码之后，单击左上 角的“完成”按钮即可返回安装界面。

如果在生产环境中设置密码，通常需要注意两点，其一是密码必须要有一定的长度，通常 建议设置为8~16位。其二是密码要具备一定的复杂性，复杂性通常用"四分之三原则”来 衡量，即密码要包含构成密码的4种字符（大写字母、小写字母、数字和字符）中的3种。

ggTil 设置完密码之后，等待安装程序安装完成（视计算机配置不同，此步可能需要20-40 分钟），安装结束时如图2.23所示。

配量    CENTOS 7安装

![img](11 CentOS7系统管理与运维实战_files/11 CentOS7fbdfa1060ed0f49e18-28.jpg)



C€ntOS



因cn

用户边霣

ROOTS碑    9    倒廳枏户00

设奮-imi鼉&    H    格ft（電用户嫩

充_

CentOS 功安强利您的竹障机并珂以«用！ ■麻然偽使用吧！

篇躺

a. an* 产

图2.23安装完成

此时只需要单击.“重启”按钮，系统就会将最后的修改写入硬盘并重新启动系统，至此 CentOS 7就已经安装完成了。

2.2.3 U 盘安装 CentOS 7

由于光盘使用不是非常方便，目前在计算机中安装操作系统多使用U盘，CentOS 7也可 以使用U盘安装。本小节将简单介绍如何使用U盘安装CentOS 7。

首先需要下载一个名为USBWriter的软件，将U盘插入计算机的USB接口，确保系统能 正常识别U盘，且U盘足够大（建议容量8GB）。然后打开USBWriter,如图2.24所示。

图 2.24 USBWriter 软件



单击Source后面的“Browse”按钮，在弹出的对话框中选择CentOS 7的光盘映像文件， 然后在Target后面选择要使用的U盘。由于写入光盘映像会清空U盘中的所有数据，此步骤 请慎重。确定使用的U盘中没有任何有用数据之后，单击“Write”按钮开始写入映像文件。

待USBWriter写入完成，将U盘插入需要安装CentOS 7的计算机上，然后使用U盘启动 安装。之后的安装步骤与2.2.1中介绍的相同，此处不再赘述。

![img](11 CentOS7fbdfa1060ed0f49e18-30.jpg)



并不是所有的U盘都可以写入光盘映像，某些U盘制作启动盘时，可能会失败。

2.2.4 Windows 7+CentOS 7 双系统安装

由于虚拟机安装CentOS 7时会占用大量内存，对计算机要求相对较高，低配置的计算机 运行可能会不太流畅，因此许多人将Windows和CentOS都安装到同一个计算机中。本小节将 以Windows 7为例，介绍如何在一台计算上同时安装Windows和Linux,此处介绍的方法也适 合其他版本的Windows和Linux。

(1)安装双系统应该先安装Windows,因为Windows的引导装载程序无法引导Linux系 统，但Linux系统的引导程序Grub则可以引导Windows。因此应该先安装Windows,然后再 安装Linux,在Linux的引导程序中添加Windows引导选项。

如果计算机中还没有安装Windows 7,即硬盘中还没有分区，在Windows 7安装时需要为 CentOS 7预留足够的空间。这些空间可以不用分区，以空闲空间的形式存在即可，如图2.25所示。

图2.25安装Windows 7时预留空间



从图中可以看到磁盘0的容量约为80GB,其中分区1是由Windows 7安装程序自动分配 的系统保留空间，容量为48.7GB的分区2作为Windows 7的系统分区，即C盘。分区3是分 配给Windows 7使用的第二个分区，大小为19.5GB,而最后还有一个未分配空间，容量为 11.6GB,这个未分配空间就是留给CentOS 7的空间。

安装Windows 7时，也可以只添加系统盘，待系统安装完成后，再使用磁盘管理器进行 分区并预留空间。由于需要将Windows 7安装在分区2中，因此只需选中分区2并单击“下 一步”继续安装即可。

![img](11 CentOS7fbdfa1060ed0f49e18-32.jpg)



由于本书的重点并非Windows的安装，故此略过Windows安装一节，Windows 7和其他 版本Windows的安装方法，读者可自行阅读相关文档或搜索相关视频了解。

(2)如果计算机中已安装了 Windows 7且磁盘中已没有未分配的空闲空间，则可以使用 魔术分区大师等软件重新调整分区，将分区中的未使用空间调整为未分配空间。如果磁盘中还 有未使用的空间，则可在桌面上的“计算机”图标上单击右键，在弹出的菜单中选择“管理”, 然后在弹出计算机管理界面左侧依次选择“存储”和“磁盘管理”，如图2.26所示。

图2.26计算机管理



如果系统中还有多余没有分配的空闲空间，此时可以在未分配空间上单击右键，添加分区。 最后剩余一部分空间作为CentOS 7的预留空间。如图2.26所示，己经为CentOS 7预留了一 个10.66GB的未分配空间。

(3)完成上述步骤后，重新启动系统，修改BIOS设置并使用安装光盘或U盘启动系统, 然后安装CentOS 7,安装过程与2.2.1节中介绍的相同，此处不再赘述。安装完成后登录系统, 在桌面上单击右键，选择“在终端中打开”，此时将弹出终端窗口。接下来相修改CentOS 7 引导装载程序的配置文件，并添加Windows 7的引导选项。'

在终端窗口中输入命令“su-root”，然后输入root用户密码切换到root用卢，需要注 意的是输入密码时终端内不会有任何显示，输入完成后按Enter键即可。切换成root用户 后，命令提示符将变为 “[root@localhost 〜]#”，输入命令 “gedit /boot/grub2/grub.cfg” 按 Enter键，此命令表示使用gedit编辑器打开Grub的配置文件/boot/grub2/grub.cfg。待gedit 打开后，依次单击菜单中的“搜索”和“跳转到行”，在弹出的对话框中输入70,此时光 标将跳转到第70行。

如图2.27所示，在原有的菜单条目“menuentry”之后加上Windows 7的引导选项。引导 项中“Windows 7”表示启动时，Grub显示的菜单名称，“set root=（hdO，l）”表示Windows引 导的设备为第0块磁盘的第1个分区（此处需要按实际情况设置），而其后的“chainloader+1” 表示加载Windows的引导程序。

g«dit



grub.cfg (/boot/grub2)

文件（F）



査看(V)搜索(S)工具(T)文栏(D)

；'Ll grub.tfg

:terminaX_output console !if【feature_timeout_style = xy ] ; then set timeout_style=menu

set timeout=5

:# Fallback normal, timeout code in case ths timeout—style feature is :# unevollable.

•elsa

set timeout=5

END /d/flrub.d^SJieader menuentry 'Windows 1' { set root=(hdO,l) chainloader +1

\#ff BElilM /ofc/qnjb.d/'lO 'linux ###

•menuentry 'CentOS Linux, with Linux 3.16.0-123.917.x86_64* --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option -'gnulinux-3.1Q.G-i23.aX7.x86_64-advanced-166fe31f-3c35-4520-b604-95blsed686ae• { load_vldeo

set gfkpaylosd=keep

insmod gzio lnsmod part_msdos insmod xfs ~

i-----___；______________ ______________翼

统文本*    制表符贳度：8 *    行TO•列1 播入



图 2.27 使用 gedit 编辑 grub.cfg

完成以上操作后，保存退出并重启系统，待系统重启后可以发现CentOS 7的引导菜单中 多了 Windows 7的引导选项，如图2.28所示。

UindoHK 7

Efjittlts I.i n<iX. Ml! h I. i nux B-rescue ZBM'ibbH^USn'/^HyVah'MJSlcttOreliSlo

Use « I»h T and i hoys to change the sol»v.t ion.

Press a" to <«111 «hr seloct«il i tew. or' 'c' for rt cn«Mdnd pruMpt Th»f sol«ct«rt ont ry Mill be stflrled «utnH<«t ic« I (y in 5 s,.

图2.28 CentOS 7引导菜单

从图2.28中可以看出，引导菜单中已有Windows 7选项，此时只需要使用向上方向键选 中该选项并按Enter键即可引导进入Windows 7。

2.2.5网络安装

网络安装分为两种模式，一种是使用Netlnstall版（网络安装版），使用这个版本安装需要 通过网络下载安装所需的软件包；另一种方式是使用PXE网络启动的方式安装，这种方式适 用于大规模自动化安装，例如一次性安装100台计算机，井且这些计算机的分区方案都相同。 由于PXE网络启动安装方式比较复杂且实用性不太多，此处不作介绍，读者可自行阅读相关 文档了解，本小节将介绍如何使用网络安装版的使用方法。

网络安装通常适用于不能使用DVD和U盘的环境，读者仍可以使用虚拟机模拟安装。首 先需要下载Netlnstall版的光盘映像文件，接下来需要让虚拟机能正常访问网络，这时网络连 接方式一般选择桥接或NAT,视宿主机网络环境而定。接下来使用Netlnstall版光盘映像启动 虚拟机，之后的操作与2.2.1中介绍的相同，直到进入安装信息摘要界面。

在Netlnstall版的安装信息摘要界面中，会要求用户设置安装源。首先需要设置网络，可 以单击“网络和主机名”进行设置，请参考2.2.1节中的介绍，此处不再赘述。完成网络设置 后，单击“安装源”进行设置，如图2.29所示。

Mtp:// w mirrors 163 «om/Mntos/7/o47*a6.64/    代

| 麵外《件愈靡 | » URL摘朐一个银像列《＜^1） |                |
| ------------ | --------------------------- | -------------- |
| ‘已硒网名摘  |                             | 咨觯iw’n    \| |
|              |                             | * !'■用庐SiMh  |
| 卜'          |                             | 窗             |

图2.29安装源设置



![img](11 CentOS7fbdfa1060ed0f49e18-35.jpg)



| 安装源 | CENTOS 7 安装 |
| ------ | ------------- |
| '韻bi  |               |

您觀使m馨个安装S7

«在W格上（NJ:

如图2.29所示在安装源中输入地址即可，此处使用的是网易的安装源，读者也可以从 CentOS官网上查询并使用其他安装源。设置完安装源之后，其他设置和安装方法与2.2.1小节 中介绍的相同，此处不再赘述。

.鹼



也可以通过解压DVD安装光盘映像的方式自建安装源，但由于光盘文件名长度限制，光 盘中解压出的目录repodata和Packages中有许多文件名有误，需要修正才能使用。

![img](11 CentOS7fbdfa1060ed0f49e18-36.jpg)
