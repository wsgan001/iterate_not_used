
1.4为什么len不是普通方法

我在2013年问核心开发者Raymond Hettinger这个问题时，他用“Python之

禅”(https://www+python.org/doc/humor/#the-zen-of-python)里的原话回答了我：“实用胜于 纯粹。 ”在 1.2 节里我提到过，如果 x 是一个内置类型的实例，那么 len(x) 的速度会非 常快。背后的原因是 CPython 会直接从一个 C 结构体里读取对象的长度，完全不会调用任 何方法。获取一个集合中元素的数量是一个很常见的操作，在 str、 list、 memoryview 等类型上，这个操作必须高效。

换句话说， len 之所以不是一个普通方法，是为了让 Python 自带的数据结构可以走后 门， abs 也是同理。但是多亏了它是特殊方法，我们也可以把 len 用于自定义数据类

型。这种处理方式在保持内置类型的效率和保证语言的一致性之间找到了一个平衡点，也

印证了“Python之禅”中的另外一句话：“不能让特例特殊到开始破坏既定规则。”

如果把abs和len都看作一元运算符的话，你也许更能接受它们——虽然看 起来像面向对象语言中的函数，但实际上又不是函数。有一门叫作 ABC 的语言是 Python 的直系祖先，它内置了一个 # 运算符，当你写出 #s 的时候，它的作用跟 len 一样。如果写成 x#s 这样的中缀运算符的话，那么它的作用是计算 s 中 x 出现的次 数。在Python里对应的写法是s.count(x)。注意这里的s是一个序列类型。
