算法艺术与信息学竞赛

010100101001111011000010101100000101011111000001110110101101011110101010110101101010111010111011111101000010101100110101001010110010100600001010100-

适合语言零基础的初学者 算法竞赛主要知识点的入门与拓宽 近200道竞赛真题分析

实用主义的C++和STL讲解 ••简洁、清晰、高效的示例代码





入门经典

第2版）


刘汝佳◎编著



清华大学出版社


刘汝佳，1982年12月生，高中毕业于重庆市外国语学校。

2000年3月获得NOI2000全国青少年信息学奥林匹克竞赛一等奖第四名，进入国家集训 队，并因此保送到清华大学计算机科学与技术系。大一时获2001年ACM/ICPC国际大学生程

序设计竞赛亚洲-上海赛区冠军和2002年世界总决赛银牌（世界第四）， 2005年获学士学 位， 2008年获硕士学位。

学生时代曾为中国计算机学会NOI科学委员会学生委员，担任IOI2002-2008中国国家队 教练，并为NOI系列比赛命题十余道。现为NOI竞赛委员会委员，并在NOI 25周年时获得中

国计算机学会颁发的“特别贡献奖”。

2004年至今共为ACM/ICPC亚洲赛区命题二十余道，担任6次裁判和2次命题总监，并应 邀参加IOI和ACM/ICPC相关国际研讨会，发表论文两篇。

2004年初作为第一作者出版专著《算法艺术与信息学竞赛》， 2009年出版译著《编程挑 战》， 2009年出版《算法竞赛入门经典》， 2012年出版《算法竞赛入门经典——训练指

南》。

多年来在全国二十余个城市进行中学生竞赛培训工作，为北京、上海、吉隆坡等地的著

名高校授课与宣讲，并多次与TopCoder、百度和网易有道等知名企业合作举办比赛，让更多 的IT人才获得展示自我的平台。

算法艺术与信息学竞赛


oioiooioiooiinouooooioioiioooooioioiinioooooinoiiowiioioiiiioioioioiioioiioioioHioionioiniiwiooooioioiiooiioioiooioioiiooioiooooooowioiooioi






刘汝佳◎编著


清华大学出版社

北京


内容简介 本书是一本算法竞赛的入门与提高教材，把C/C++语言、算法和解题有机地结合在一

起，淡化理论，注重学习方法和实践技巧。全书内容分为12章，包括程序设计入门、循环结

构程序设计、数组和字符串、函数和递归、C++与STL入门、数据结构基础、暴力求解法、

高效算法设计、动态规划初步、数学概念与方法、图论模型与算法、高级专题等内容，覆盖

了算法竞赛入门和提高所需的主要知识点，并含有大量例题和习题。书中的代码规范、简

洁、易懂，不仅能帮助读者理解算法原理，还能教会读者很多实用的编程技巧；书中包含的

各种开发、测试和调试技巧也是传统的语言、算法类书籍中难以见到的。

本书可作为全国青少年信息学奥林匹克联赛（NOIP）复赛教材、全国青少年信息学奥 林匹克竞赛（NOI）和ACM国际大学生程序设计竞赛（ACM/ICPC）的训练资料，也可作为 IT工程师与科研人员的参考用书。

本书封面贴有清华大学出版社防伪标签，无标签者不得销售。

版权所有，侵权必究。侵权举报电话：010-62782989    13701121933

图书在版编目（CIP）数据

算法竞赛入门经典/刘汝佳编著．－2版．－北京：清华大学出版社， 2014 （算法艺术与信息学竞赛）

ISBN 978-7-302-35628-8

I .①算...II .①刘... III.①计算机算法-教材IV.①TP301.6

中国版本图书馆CIP数据核字（2014 ）第046697号

责任编辑：朱英彪

封面设计：刘超

版式设计：文森时代

责任校对：王 云 责任印制：

出版发行：清华大学出版社

网    址：http ://www.tup.com.cn，http://www.wqbook.com

地    址：北京清华大学学研大厦A座邮编：100084

社总机：010-62770175 邮购：010-62786544

投稿与读者服务： 0 1 0-62776969，c-service@tup.tsinghua.edu.cn 质量反馈 ： 0 1 0-627720 1 5，zhiliang@tup.tsinghua.edu.cn

印 刷 者：

装 订 者：

经

销：

全国新华书店

开

本：

:185mmx260mm 印    张：30.5 字

数： 794千字

版

次：

2009年11月第1版 2014年6月第2版 印

次： 2014年6月第1次印刷

印

数：

:1 - 5000

定

价：

49.80元

产品编号： 055687-01

《算法竞赛入门经典（第2版）》要面世了。一方面高兴，一方面也想借题发挥，这是

因为近年来我和我的团队致力于研究计算机教育的改革，对于应该如何提升学生的思维能力

和行动能力有了新的认识。当然我会把握“不要离题太远”。

在我的书案上常年摆着一本蓝皮的书《算法艺术与信息学竞赛》，这是刘汝佳与黄亮合 写的书， 2003年12月我怀着喜悦的心情给这本书写了一页纸的序言。今天，时隔十年，我又 拿起笔来为汝佳的新书作序，想到信息学奥林匹克的魅力，看到我们的学生能够承担起普及

的责任和水平，此时此刻我的欣喜之情难以言表。 “青出于蓝更胜于蓝”是我们当老师的最大 愿望和期盼。汝佳之所以能写出这种内容和内涵丰富，文字也很难表达的思维艺术之美的好

书，在于他对于信息学竞赛的热爱和他在青少年中普及计算机知识的强烈的责任感。汝佳为

人低调诚实，做事认真负责，最可贵之处是那种“打破砂锅问到底”的求真务实精神，还有就

是愿意和善于与人合作共事，能够真心听取别人的意见。

刘汝佳在中学参加信息学奥赛，进入清华大学后作为主力队员参加过ACM/ICPC世界大 学生程序设计大赛，在本科和读研期间又长期担任国际信息学奥林匹克中国队的教练。很早

以前他就说过：想写一本“从入门开始就能陪伴着读者的书”，意思是书的作用不仅是答疑、

解惑，更是像朋友和知己，同读者一起探讨和研究问题。我当然赞成著书者的境界，在我给

本科生上“程序设计基础”课时的感悟是：教学相长，发挥学生在学习中的主体作用，激发兴

趣和调动积极性，创造条件，使其参与课程内容的研讨，并提出宝贵意见，是成就精品课的 必由之路。汝佳说： “书的第12章就像是一个路标，告诉你每条路通往怎样的风景，但是具 体还得靠读者自己走过去，在走之前也需要自己选择。 ”话说得很到位。闪光的东西蕴含在 解决问题时的那些思维之美中，精妙的解题思路和策略有时令人拍案叫绝，一路学一路体味 赏心悦目的风景，没有不爱学和学不会之理。

学会编程是一件相当重要的事，我在清华上课时对学生说“这是你们的看家本事”。一个

国家，一个民族，要想不落伍，要想跻身于世界民族之林，关键在于拥有高素质的人才。学

习和掌握信息科学与技术，在高水准人才的知识结构中占有重要的地位。讲文化要以科学为 基础，讲科学要提高到文化的高度。学习计算机必须了解这一学科的内在规律和特征， “构

造性”和“能行性”是计算机学科的两个最根本特征。与构造性相应的构造思维，又称计算思

维，指的是通过算法的“构造”和实现来解决一个给定问题的一种“能行”的思维方式。

有些问题没有固定的解法，给读者留有广阔的发挥创造力的空间，经过思考构造出的算

法能不能高效地解决问题，都得通过上机实践的检验，在这一过程中思维能力和行动能力会

同步提升。我认为高手应该是这样炼成的。光说不练，纸上谈兵是绝对学不会的。

当前，有识之士已经认识到：大学计算机作为基础课，与数学、物理同样重要。培养计

算机的应用能力，掌握使用计算机的思路和方法，必须既动手又动脑，体会和感悟蕴含于其

中的计算思维要素，对于现代人是非常重要的。

当你拿到这本书时，建议你先看“阅读说明”。其中有两点，一是“本书最好是有人带着

学习”，如果这一点做不到的话，建议你求助于网络，开展合作学习，向高人请教，让心得

共享，这些都符合现代学习理念；二是“一定要重视书中的提示”，因为其中包含着需要掌握

的重要知识点和编程技巧，你会发觉有些内容在一般教科书中是看不到的。

这是一本学习竞赛入门的书。我想说的是参加信息学竞赛入门不难，深造也是做得到

的，关键是专心、恒心与信心，世上无难事，只要肯攀登！

全国信息学奥林匹克（NOI）科学委员会名誉主席 国际信息学奥林匹克中国队总教练

清华大学计算机科学与技术系 吴文虎

认识刘汝佳已有十多年的时间。2000年3月，我作为NOI （全国信息学奥林匹克）科学 委员会委员赴澳门参加NOI2000的竞赛组织工作，正是在那届NOI上，刘汝佳以总分第四名 的优异成绩获得NOI2000金牌并进入国家集训队。保送进入清华计算机系后，他又经选拔成 为清华大学ACM队的主力队员，先后获得2001年ACM/ICPC （国际大学生程序设计竞赛）亚 洲-上海赛区冠军和2002年世界总决赛的银牌（世界第四）。其后的多年时间里，他还同时 担任NOI科学委员会的学生委员和IOI（国际信息学奥林匹克）中国国家队的教练。

2005-2007年，刘汝佳在清华计算机系读研期间，正逢我为本科生开设《数据结构》课 程，他多次担任这门课程的助教工作。十多年来他几乎每年都受聘参加NOI冬令营的授课，

并赢得听课选手的一致好评。

可以说，刘汝佳既是一名NOI和ACM/ICPC成绩优异的金牌选手，又是曾多年执教国家 集训队的金牌教练，同时还作为在NOI冬令营等竞赛培训第一线参与授课培训最受欢迎的金 牌教师。他在信息学奥赛方面的丰富经历与多重身份，特别是近20年来他对信息学奥赛的痴 迷与执着，使得他对程序设计语言得心应手，对各种数据结构和算法的理解也颇有心得。这 些都为他日后编写算法和编程竞赛的多部专著奠定了坚实的基础。

以信息学奥赛的应用为背景，将数据结构和算法的知识点讲解与信息学奥赛的问题求解

紧密联系在一起，通过大量鲜活的奥赛解题实例让读者领悟到不同算法和数据结构的精妙，

是刘汝佳教材的独到之处与鲜明特色。这也是国内大量单一身份的作者（课程教师）编写的

教材所欠缺又无法企及的。我们通常看到的或者是单纯叙述算法与数据结构知识的普通教

材，或者是专门针对竞赛题目的题解汇编，但真正既能涵盖算法竞赛的主要知识点，又融入

大量比赛技巧和解题经验教训，且将二者融会贯通的教材实在是凤毛麟角。刘汝佳的教材在

这方面或者可以说是填补了空白，至少也称得上是独树一帜，这也是许多作者心有余而力不

足的。

从编排结构和写作特点上来说，刘汝佳的专著充分考虑不同层次的读者阅读需求，在

《算法竞赛入门经典》中分为语言篇、基础篇和竞赛篇，循序渐进，既适合初学者，也适合

高手进一步提升研读。特别是书中大量实用的示例代码和丰富的例题与习题，使各种水平的

选手都能从他的书中获益并汲取营养，是有志在竞赛中取得佳绩的选手所必备的参考资料。

从刘汝佳的第一本专著《算法艺术与信息学竞赛》问世至今刚好十年时间。其间，在读

者好评如潮和高于市场预期的销量面前，刘汝佳并没有就此止步，而是搜集信息学竞赛选手

的各种需求，对已出版的教材进行更多有益的尝试。在繁忙的工作之余仍能挤出时间笔耕不

辍，这也从一个侧面反映了他的勤奋刻苦、不懈进取以及对信息学奥赛的执着追求。我们为

国内信息学奥赛领域有汝佳这样优秀的专家学者感到庆幸。中国计算机学会2009年为他颁发

的“特别贡献奖”实至名归。

今年正值邓小平同志提出“计算机的普及要从娃娃抓起”和全国信息学奥林匹克创办30周

年，刘汝佳的新版专著为这一历史时刻增光添彩。我们期待信息学奥赛领域有更多更好的教

材专著问世。让一切与信息学奥赛相关的劳动、知识、技术、管理和资本的活力竞相迸发，

让一切与信息学奥赛创新改革的源泉充分涌流。让我们共同努力，谱写全国信息学奥林匹克

的新篇章。

全国信息学奥林匹克（NOI）科学委员会主席

清华大学计算机科学与技术系

王宏

ACM国际大学生程序设计竞赛（简称为ACM-ICPC或ICPC ）始于1970年，成形于1977

年，并于1996年进入我国大陆。由于该项赛事形式别具一格，竞赛题目既有挑战性又有趣味

性，有助于培养参赛选手的抽象思维、逻辑思维、心理素质、团队合作和协同能力，所以深

受参赛选手们的喜爱，ACM-ICPC赛事也从不为人所知、从组委会千方百计邀请各个兄弟院

校组队参赛捧场，到如今各赛区组委会都遇到了多次扩容仍无法满足大家的参赛愿望。虽然

在1996年仅有19所学校的25队参赛，但在2013年已有来自250所高校的4300多队参加了网络 赛， 170多所学校的840多队获得了参加现场赛的机会。从竞赛中脱颖而出的优秀选手也获得 了国内外著名企业的高度认可，可以说ACM-ICPC大赛得到社会各界的广泛认可，这也是对

我们这批该项赛事组织者而言最大的鼓励和回报。

刘汝佳则是从该项赛事中涌现出的佼佼者之一，他不仅在该项赛事中取得了优异的成

绩，获得了2011年ACM-ICPC亚洲区上海赛区冠军和2002年夏威夷全球总决赛银奖第一，而

且热心于该项赛事的著书写作和命题等工作。

《算法竞赛入门经典（第2版）》将程序设计语言和算法灵活地结合在一起，形式独

特，算法部分讲解细致，内容涵盖了许多经典算法，强调了不少入门时的注意事项，并且在

—定程度上回答了“参加ACM-ICPC需要掌握哪些基本的知识点、哪些经典算法、要注意哪些 基本的编程技巧、ICPC优秀选手是如何分析问题和优化代码的”等一系列问题。

虽然本书不是一本专门为ACM-ICPC而写的教材，但是书中所有例题都来自ACM-ICPC 相关竞赛，不仅可作为ACM-ICPC的入门参考书，同时也是一本适合具有一定数学基础但没 有接触过程序设计的大学生阅读的算法参考书。

ACM国际大学生程序设计竞赛中国区指导委员会秘书长

上海大学 周维民

《算法竞赛入门经典》第1版出版至今已有四个年头。这四年间发生了很多变化，如

NOI系列比赛终于对STL“解禁”，如C11和C++11标准出台，g++编译器升级（直接导致本书

第1版中官方使用的＜？和＞？运算符无法编译通过），如《算法竞赛入门经典——训练指

南》的出版弥补了本书第1版的很多缺憾，再如ACM/ICPC的蓬勃发展，使更多的大学生了解

并参与到了算法竞赛中来……

看来，是时候给本书“升级”了。

主要的变化

我原本打算只是增加一章专门介绍C++和STL，用符合新语言规范的方式重写部分代

码，顺便增加一些例题和习题，没想到一写就是100页——几乎让书的篇幅翻了一倍。写作

第1版时， 220页的篇幅是和诸位一线中学教师商量后定下来的，因为书太厚会让初学者望而

生畏。不过这几年的读者反馈让我意识到：由于篇幅限制，太多的东西让读者意犹未尽，还

不如多写点。虽然之后出版了《算法竞赛入门经典——训练指南》，但那本书的主要目标是

补充知识点，即拓展知识宽度，而我更希望在知识宽度几乎不变的情况下增加深度——我眼

中的竞赛应该主要比思维和实践能力，而不是主要比见识。

索性，我继续加大篇幅，用大量的例子（包括题目和代码）来表现我想向读者传达的信

息。一位试读的朋友在收到第一份书稿片段时惊呼：“题目的质量比第1版提高太多了！”这

正是我这次改版的主要目的。

具体来说，这次改版有以下变化：

□在前4章中逐步介绍一些更实用的语言技巧，直接使用竞赛题目作为例子。

□全新的第5章，讲解竞赛中最常用的C++语法，包括STL算法和容器。

□第6〜7章作为基础篇，加大代码和技巧的比例，并适当增加例题。

□第8〜11章作为中级篇，增加了各种例题，着重锻炼思维能力。

□全新的第12章作为高级篇，在《算法竞赛入门经典——训练指南》的基础上补充少量知

识点与大量精彩例题。

需要特别说明的是第12章出现的原因。这一章的内容很难，而且要求读者熟练掌握《算

法竞赛入门经典——训练指南》的主要内容，看起来和“入门”二字是矛盾的。其实本书虽然

名为“入门经典”，实际上却不仅只适合入门读者。根据这几年读者反馈的情况来看，有相当

数量的有经验的选手也购买了本书。原因在于：很多有经验的选手属于“自学成才”，总觉得

自己可能会漏掉点什么基础知识。事实也是如此：本书中提到的很多代码和分析技巧是传统

教科书中见不到的，对于很多有经验的选手来说也是“新鲜事物”，并且他们能比初学者更

快、更好地把这些知识运用到比赛中去。本书第12章就是为这些读者准备的。如果这样解释

还不够直观，就把第12章作为一个游戏里通关后多出来的Hard模式吧！

阅读说明

既然内容有了较大变化，阅读方式也需要再次说明一下。首先，和本书第1版一样，本

书最好是有人带着学习，如老师、教练或者学长。随着网络的发展，这个条件越来越容易

满足了——就算是没人指导，也可以在别人的博客中留言，或者在贴吧中寻求帮助。

一定要重视书中的“提示”。书中有很多“提示”部分都是非常重要的知识点或者技巧，

有些提示看似平凡无奇，但如果没有引起重视而导致赛场上丢分，可是会追悔莫及的。

接下来是关于新增第5章的。首先声明一点，这一章并不是C++语言速成——C++语言是 不可能速成的。这一章不是说你从头读到尾然后就掌握C++了，而是提供一个纲要，告诉你

哪些东西是算法竞赛中最常用的，以及这些东西应当如何使用。你可以先另外找一本书（或

者阅读网上的文章）学习C++ ,然后再看本书第5章（目的是把那些又容易晕又不那么有用 的知识从脑子里删除），也可以直接看本书第5章，每次遇到看不懂或者觉得不够详细的地 方，再找其他参考书来学。顺便说一句，就算你已经非常熟悉C++了，也最好浏览一下第 5章（特别是代码！）。这不会花费太多时间，但很可能学到有用的东西。

忍不住再说点题外话。有时学习算法的最好方法并不是编写程序，而是手算。 “手算”这

个词听上去有点枯燥，改成“玩游戏”如何？如《雷顿教授与不可思议的小镇》就是一个不错

的选择——它包含了过河问题（谜题7、93）、找砝码（谜题6、131）、一笔画（谜题30、

39 ）、n皇后（谜题80〜83 , 130 ）、倒水问题（谜题23、24、78 ）、幻方（谜题95 ）、华容 道（谜题97、 132、 135）等诸多经典问题。

最后，需要特别指出的是，本书前11章中全部155道例题的代码都可以在代码仓库中下 载：https://github.com/aoapc-book/aoapc-bac2nd/。书稿中因篇幅原因未能展开叙述的算法细节 和编程技巧都可以在代码仓库中找到，请读者朋友们善加利用。

致谢

虽然多出来了200多页，其实本书的改版工作并没有花费太长时间（不到半年），在此

期间也没有麻烦太多朋友读稿和讨论。参与本书第2版读稿和校对工作的几位朋友分别是：

陈锋（第8〜11章）、王玉斌（第8〜9章，第12章）、郭云镝（第12章）、曹海宇（第5章、 第9章）、陈立杰（第12章）、叶子卿（第12章）、周以凡（第12章）。

感谢给我发邮件以及在googlecode的wiki中留言指出本书第1版勘误的网友们：imxivid、 zr95.vip、李智维、王玉、 chnln0526、 yszhou4tech、 metowolf88、 zhongying822、 chong97993、 tplee923、wtx20074587、chupang、code4101等，你们的支持和鼓励是我写作的重要动力。

另外，书中部分难题的题解离不开以下朋友的赐教和讨论：Md.Mahbubul    Hasan、

Shahriar Manzoor、 Derek Kisman、 Per Austrin、 Luis Garcia、 顾昱洲、陈立杰、张培超等。

第2版的习题全部（这次不仅仅是“主要”了）来自UVa在线评测系统，感谢Miguel Revilla 教授、他的儿子Miguel Jr.和Carlos M. Casas Cuadrado对本书的大力支持。

最后，再次感谢清华大学出版社的朱英彪编辑在这个恰当的时机提出改版事宜，并容忍

我把交稿时间—拖再拖。希望这次改版不会让你失望。

刘汝佳

前言

“听说你最近在写一本关于算法竞赛入门的书？”朋友问我。

“是的。 ”我微笑道。

“这是怎样的一本书呢？”朋友很好奇。

“C语言、算法和题解。”我回答。

“什么？几样东西混着吗？”朋友很吃惊。

“对。 ”我笑了， “这是我思考许久后做出的决定。 ”

大学之前的我

12年前，当我翻开Sam A. Abolrous所著的《C语言三日通》的第一页时，我不会想到自 己会有机会编写一本讲解C语言的书籍。当时，我真的只用了3天就学完了这本书，并且自信 满满：“我学会C语言啦！我要用它写出各种有趣、有用的程序！ ”但渐渐地，我认识到了：

虽然浅显易懂，但书中的内容只是C语言入门，离实际应用还有较大差距，就好比小学生学 会造句以后还要下很大工夫才能写出像样的作文一样。

第二本对我影响很大的书是Sun公司Peter van der Linden （ PvdL ）所著的《C程序设计奥 秘》。作者称该书应该是每一位程序员“在C语言方面的第二本书”，因为“书中绝大部分内 容、技巧和技术在其他任何书中都找不到”。原先我只把自己当成是程序员，但在阅读的过 程中，我开始渐渐了解到硬件设计者、编译程序开发者、操作系统编写者和标准制定者是怎 么想的。继续的阅读增强了我的领悟：要学好C语言，绝非熟悉语法和语义这么简单。

后来，我自学了数据结构，懂得了编程处理数据的基本原则和方法，然后又学习了8086 汇编语言，甚至曾没日没夜地用SofICE调试《仙剑奇侠传》，并把学到的技巧运用到自己开 发的游戏引擎中。再后来，我通过《电脑爱好者》杂志上一则不起眼的广告了解到全国信息 学奥林匹克联赛（当时称为分区联赛，NOIP是后来的称谓）。“学了这么久的编程，要不参 加个比赛试试？”想到这里，我拉着学校里另外一个自学编程的同学，找老师带我们参加了 1997年的联赛——在这之前，学校并不知道有这个比赛。凭借自己的数学功底和对计算机的 认识，我在初赛（笔试）中获得全市第二的成绩，进入了复赛（上机）。可我的上机编程比 赛的结果是“惨烈”的：第一题有一个测试点超过了整数的表示范围；第二题看漏了一个条

件，一分都没得；第三题使用了穷举法，全部超时。考完之后我原以为能得满分的，结果却

只得了100分中的20多分，名落孙山。

痛定思痛，我开始反思这个比赛。一个偶然的机会，我拿到了一本联赛培训教材。书上 说，比赛的核心是算法（Algorithm ）,并且推荐使用Pascal语言，因为它适合描述算法。我 复制了一份Turbo Pascal 7.0 （那时网络并不发达）并开始研究。由于先学的是C语言，所以 我刚开始学习Pascal时感到很不习惯：赋值不是“=”而是“:=”，简洁的花括号变成了累赘的

begin和end , if之后要加个then ,而且和else之间不允许写分号......但很快我就发现，这些都

不是本质问题。在编写竞赛题的程序时，我并不会用到太多的高级语法。Pascal的语法虽然 稍微啰嗦一点，但总体来说是很清晰的。就这样，我只花了不到一天的时间就把语法习惯从 C转到了Pascal ,剩下的知识就是在不断编程中慢慢地学习和熟练——学习C语言的过程是 痛苦的，但收益也是巨大的，“轻松转到Pascal”只是其中一个小小的例子。

我学习计算机，从一开始就不是为了参加竞赛，因此，在编写算法程序之余，我几乎总 是使用熟悉的C语言，有时还会用点汇编，并没有觉得有何不妥。随着编写应用程序的经验 逐渐丰富，我开始庆幸自己先学的是C语言——在我购买的各类技术书籍中，几乎全部使用 的是C语言而不是Pascal语言，尽管偶尔有用Delphi的文章，但这种语言似乎除了构建漂亮的 界面比较方便之外，并没有太多的“技术含量”。我始终保持着对C语言的熟悉，而事实证 明这对我的职业生涯发挥了巨大的作用。

中学竞赛和教学

在大学里参加完ACM/ICPC世界总决赛之后（当时ACM/ICPC还可以用Pascal ,现在已经 不能用了），我再也没有用Pascal语言做过一件“正经事”（只是偶尔用它给一些只懂Pascal的 孩子讲课）。后来我才知道，国际信息学奥林匹克系列竞赛是为数不多的几个允许使用 Pascal语言的比赛之一。IT公司举办的商业比赛往往只允许用C/C++或Java、C#、Pyhon等该 公司使用较为频繁的语言（顺便说一句，C语言学好以后，读者便有了坚实的基础去学习上 述其他语言），而在做一些以算法为核心的项目时，一般来说也不能用Pascal语言——你的 算法程序必须能和已有的系统集成，而这个“现有系统”很少是用Pascal写成的。为什么还有 那么多中学生非要用这个“以后几乎再也用不着”的语言呢？

于是，我开始在中学竞赛中推广C语言。这并不是说我希望废除Pascal语言（事实上， 我希望保留它），而是希望学生多一个选择，毕竟并不是每个参加信息学竞赛的学生都将走 入IT界。但如果简单地因为“C语言难学难用，竞赛中还容易碰到诸多问题”就放弃学习C语 言，我想是很遗憾的。

然而，推广的道路是曲折的。作为五大学科竞赛（数学、物理、化学、生物、信息学）

中唯——门高考中没有的“特殊竞赛”，学生、教师、家长所走的道路要比其他竞赛要艰辛得

多。

第—，数理化竞赛中所学的知识，多是大学本科时期要学习的，只不过是提前灌输给高

中生而已，但信息学竞赛中涉及的很多知识甚至连本科学生都不会学到，即使学到了，也只

是“简单了解即可”，和“满足竞赛的要求”有着天壤之别，这极大地削减了中学生学习算法和

编程的积极性。

第二，学科发展速度快。辅导信息学竞赛的教师常常有这样的感觉：必须不停地学习学

习再学习，否则很容易跟不上“潮流”。事实上，学术上的研究成果常常在短短几年之内就体

现在竞赛中。

第三，质量要求高。想法再伟大，如果无法在比赛时间之内把它变成实际可运行的程 序，那么所有的心血都将白费。数学竞赛中有可能在比赛结束前15分钟找到突破口并在交卷 前—瞬间把解法写完——就算有漏洞，还有部分分数呢；但在信息学竞赛中，想到正确解法 却5个小时都写不完程序的现象并不罕见。连程序都写不完当然就是0分，即使程序写完了， 如果存在关键漏洞，往往还是0分。这不难理解——如果用这个程序控制人造卫星发射，难 道当卫星爆炸之后你还可以向人炫耀说：“除了有—个加号被我粗心写成减号从而引起爆炸 之外，这个卫星的发射程序几乎是完美的。 ”

在这样的情况下，让学生和教师放弃自己熟悉的Pascal语言，转向既难学又容易出错的 C语言确实是难为他们了，尤其是在C语言资料如此缺乏的情况下。等一下！ C语言资料缺 乏？难道市面上不是遍地都是C语言教材吗？对，C语言教材很多，但和算法竞赛相结合的 书却几乎没有。不要以为语言入门以后就能轻易地写出算法程序（这甚至是很多IT工程师 的误区），多数初学者都需要详细的代码才能透彻地理解算法，只了解算法原理和步骤是远 远不够的。

大家都知道，编程需要大量的练习，只看和听是不够的。反过来，如果只是盲目练习，

不看不听也是不明智的。本书的目标很明确——提供算法竞赛入门所必需的—切“看”的蓝

本。有效的“听”要靠教师的辛勤劳动，而有效的“练”则要靠学生自己。当然，就算是最简单

的“看”，也是大有学问的。不同的读者，往往能看到不同的深度。请把本书理解为“蓝本”。

没有一本教材能不加修改就适用于各种年龄层次、不同学习习惯和悟性的学生，本书也不例

外。我喜欢以人为本，因材施教，不推荐按照本书的内容和顺序填鸭式地教给学生。

内容安排

前面花了大量篇幅讨论了语言，但语言毕竟只是算法竞赛的工具——尽管这个工具非常 重要，却不是核心。正如前面所讲，算法竞赛的核心是算法。我曾考虑过把C语言和算法分 开讲解，一本书讲语言，另一本书讲基础算法。但后来我发现，其实二者难以分开。

首先，语言部分的内容选择很难。如果把C语言的方方面面全部讲到，篇幅肯定不短， 而且和市面上已有的C语言教材基本上不存在区别；如果只是提纲挈领地讲解核心语法，并 只举一些最为初级的例子，看完后读者将会处于我当初3天看完《C语言三日通》后的状态 ——以为自己都懂了，慢慢才发现自己学的都是“玩具”，真正关键、实用的东西全都不懂。

其次，算法的实现常常要求程序员对语言熟练掌握，而算法书往往对程序实现避而不

谈。即使少数书籍给出了详细代码，但代码往往十分冗长，不适合用在算法竞赛中。更重要

的是，这些书籍对算法实现中的小技巧和常见错误少有涉及，所有的经验教训都需要读者自

己从头积累。换句话说，传统的语言书和算法之间存在不小的鸿沟。

基于上述问题，本书采取一种语言和算法相结合的方法，把内容分为如下3部分：

□第1部分是语言篇（第1〜4章），纯粹介绍语言，几乎不涉及算法，但逐步引入一些工 程性的东西，如测试、断言、伪代码和迭代开发等。

□第2部分是算法篇（第5〜8章），在介绍算法的同时继续强化语言，补充了第1部分没有 涉及的语言特性，如位运算、动态内存管理等，并延续第一部分的风格，在需要时引入 更多的思想和技巧。学习完前两部分的读者应当可以完成相当数量的练习题。

□第3部分是竞赛篇（第9〜11章），涉及竞赛中常用的其他知识点和技巧。和前两部分相 比，第3部分涉及的内容更加广泛，其中还包括一些难以理解的“学术内容”，但其实这 些才是算法的精髓。

本书最后有一个附录，介绍开发环境和开发方法，虽然它们和语言、算法的关系都不 大，却往往能极大地影响选手的成绩。另外，本书讲解过程中所涉及的程序源代码可登录网 站 http://www.tup. tsinghua. edu.cn/进行下载。

致谢

在真正动笔之前，我邀请了一些对本书有兴趣的朋友一起探讨本书的框架和内容，并请

他们撰写了一定数量的文字，他们是赖笠源（语言技巧、字符串）、曹正（数学）、邓凯宁

（递归、状态空间搜索）、汪堃（数据结构基础）、王文一（算法设计）、胡昊（动态规

划）。尽管这些文字本身并没有在最终的书稿中出现，但我从他们的努力中获得了很多启

发。北京大学的杨斐瞳完成了本书中大部分插图的绘制，清华大学的杨锐和林芝恒对本书进

行了文字校对、题目整理等工作，在此一并表示感谢。

在本书构思和初稿写作阶段，很多在一线教学的老师给我提出了有益的意见和建议，他

们是绵阳南山中学的叶诗富老师、绵阳中学的曾贵胜老师、成都七中的张君亮老师、成都石

室中学的文仲友老师、成都大弯中学的李植武老师、温州中学的舒春平老师，以及我的母校

——重庆外国语学校的官兵老师等。

本书的习题主要来自UVa在线评测系统，感谢Miguel Revilla教授和Carlos M. Casas Cuadrado的大力支持。

最后，要特别感谢清华大学出版社的朱英彪编辑，与他的合作非常轻松、愉快。没有他

的建议和鼓励，或许我无法鼓起勇气把“算法艺术与信息学竞赛”以丛书的全新面貌展现给读

者。

刘汝佳

推荐序一

推荐序二

推荐序三

第2版前言

刖言

第1部分语言篇

第1章 程序设计入门

1.1

算术表达式

1.2

变量及其输入

1.3

顺序结构程序设计

1.4

分支结构程序设计

1.5

注解与习题

1.5.1

C语言、C99、C11及其他

1.5.2

数据类型与输入格式

1.5.3

习题

1.5.4

小结

第2章 循环结构程序设计

2.1

for循坏

2.2

while循坏和do-while循坏

2.3

循坏的代价

2.4

算法竞赛中的输入输出框架

2.5

注解与习题

2.5.1

习题

2.5.2

小结

第3章 数组和字符串

3.1

数组

3.2

字符数组

3.3

竞赛题目选讲

3.4

注解与习题

3.4.1

进位制与整数表示

3.4.2

思考题

3.4.3

黑盒测试和在线评测系统

3.4.4

例题一览与习题

3.4.5

小结

第4章 函数和递归

4.1

自定义函数和结构体

4.2

函数调用与参数传递

4.2.1

形参与实参

4.2.2

调用栈

4.2.3

用指针作参数

4.2.4

初学者易犯的错误

4.2.5

数组作为参数和返回值

4.2.6

把函数作为函数的参数

4.3

递归

4.3.1

递归定义

4.3.2

递归函数

4.3.3

C语言对递归的支持

4.3.4

段错误与栈溢出

4.4

竞赛题目选讲

4.5

注解与习题

4.5.1

头文件、副作用及其他

4.5.2

例题一览和习题

4.5.3

小结

第5章C++与STL入门

5.1

从C到C + +

5.1.1

C++版框架

5.1.2

引用

5.1.3

字符串

5.1.4

再谈结构体

5.1.5

模板

5.2

STL初步

5.2.1

排序与检索

5.2.2

不定长数组：vector

5.2.3

集合：set

5.2.4

映射：map

5.2.5

栈、队列与优先队列

5.2.6

测试 STL

5.3

应用：大整数类

5.3.1

大整数类BigInteger

5.3.2

四则运算

5.3.3

比较运算符

5.4

竞赛题目举例

5.5

习题

第2部分基础篇

第6章数据结构基础

6.1

再谈栈和队列

6.2

链表

6.3

树和二叉树

6.3.1

二叉树的编号

6.3.2

二叉树的层次遍历

6.3.3

二叉树的递归遍历

6.3.4

非二叉树

6.4

图

6.4.1

用DFS求连通块

6.4.2

用BFS求最短路

6.4.3

拓扑排序

6.4.4

欧拉回路

6.5

竞赛题目选讲

6.6

训练参考

第7章暴力求解法

7.1

简单枚举

7.2

枚举排列

7.2.1

生成1〜n的排列

7.2.2

生成可重集的排列

7.2.3

解答树

7.2.4

下一个排列

7.3

子集生成

7.3.1

增量构造法

7.3.2

位向量法

7.3.3

二进制法

7.4

回溯法

7.4.1

八皇后问题

7.4.2

其他应用举例

7.5

路径寻找问题

7.6

迭代加深搜索

7.7

竞赛题目选讲

7.8

训练参考

第3部分 竞赛篇

第8章 高效算法设计

8.1

算法分析初步

8.1.1

渐进时间复杂度

8.1.2

上界分析

8.1.3

分治法

8.1.4

正确对待算法分析结果

8.2

再谈排序与检索

8.2.1

归并排序

8.2.2

快速排序

8.2.3

二分查找

8.3

递归与分治

8.4

贪心法

8.4.1

背包相关问题

8.4.2

区间相关问题

8.4.3

Huffmar编码

8.5

算法设计与优化策略

8.6

竞赛题目选讲

8.7

训练参考

第9章动态规划初步

9.1

数字三角形

9.1.1

问题描述与状态定义

9.1.2

记忆化搜索与递推

9.2

DAG上的动态规划

9.2.1

DAG樟型

9.2.2

最长路及其字典序

9.2.3

固定终点的最长路和最短路

9.2.4

小结与应用挙例

9.3

多阶段决策问题

9.3.1

多段图的最短路

9.3.2

0-1背包问题

9.4

更多经典模型

9.4.1

线性结构上的动态规划

9.4.2

树上的动态规划

9.4.3

复杂状态的动态规划

9.5

竞赛题目选讲

9.6

训练参考

第10章 数学概念与方法

10.1

数论初步

10.1.1欧几里德算法和唯一分解定理

10.1.2 Eratosthenes 筛法

10.1.3扩展欧几里德算法

10.1.4同余与模算术

10.1.5 应用挙例

10.2计数与概率基础

10.2.1杨辉三角与二项式定理

10.2.2数论中的计数问题

10.2.3编码与解码

10.2.4离散概率初步

10.3其他数学专题

10.3.1 递推

10.3.2

数学期望

10.3.3

连续概率

10.4

竞赛题目选讲

10.5

训练参考

第11章 图论模型与算法

11.1

再谈树

11.1.1

无根树转有根树

11.1.2

表达式树

11.2

最小生成树

11.2.1

Kruskal 算法

11.2.2

竞赛题目选解

11.3

最短路问题

11.3.1

Dijkstra算法

11.3.2

Bellman-Ford 算法

11.3.3

Floyd算法

11.3.4

竞赛题目选讲

11.4

网络流初步

11.4.1

最大流问题

11.4.2

增广路算法

11.4.3

最小割最大流定理

11.4.4

最小费用最大流问题

11.4.5

应用举例

11.5

竞赛题目选讲

11.6

训练参考

11.7

总结与展望

第12章 高级专题

12.1

知识点选讲

12.1.1

自动机

12.1.2

树的经典问题和方法

12.1.3

可持久化数据结构

12.1.4

多边形的布尔运算

12.2

难题选解

12.2.1 数据结构

12.2.2 网络流

12.2.3数学

12.2.4

几何

12.2.5

非完美算法

12.2.6

杂题选讲

12.3

小结与习题

附录A开发环境与方法

A.1

命令行

A.1.1

文件系统

A.1.2

进程

A.1.3

程序的执行

A.1.4

重定向和管道

A.1.5

常见命令

A.2

操作系统脚本编程入门

A.2.1

Windows下的批处理

A.2.2

Linux下的Bash脚本

A.2.3

再谈随机数

A.3

编译器和调试器

A.3.1

gcc的安装和测试

A.3.2

常见编译选项

A.3.3

gdb简介

A.3.4

gdb的高级功能

A.4

浅谈IDE

主要参考书目
